!function(){"use strict";!function(){function n(n){return n=n.replace(/\/\*.*?\*\//g,""),n=n.replace(/([^{};\s])(\s*})/g,"$1;$2"),n=t(n,"entity"),n=t(n,"parens"),n=t(n,"content")}function e(n){return n.replace(/\$\$_placeholder_\[(\d+)\]/g,function(){return o.container[1*arguments[1]][0]})}function t(n,e){var t=o.info[e],r=t.pattern,i=o.container;return n.replace(r,function(){return i.push([arguments[0],arguments[arguments.length-1]]),"$$_placeholder_["+ ++o.counter+"]"})}function r(n,e){return n.split(" / ").filter(function(n){return"@"===n.charAt(0)}).join(" / ")+" / "+e}function i(n,t){for(var r,i,l,a,o=t.split(";"),u={},s=0,f=0,p=o.length;f<p;f++)r=o[f].trim(),r=e(r),i=r.indexOf(":"),l=r.substring(0,i).trim(),a=r.substring(i+1,r.length).trim(),u[l]?u[l].push([l,a,r]):(u[l]=[[l,a,r]],s++);for(var h in u)u.hasOwnProperty(h)&&u[h].length<=1&&(delete u[h],s--);s&&c.push([e(n),t,u])}function l(n){for(var e=[],t=0,r=n.length;t<r;t++){for(var i,l=n[t],a=l[0],c=a.split(" / "),o=l[2],u=Array(c.length+1).join("    "),s=[],f=[],p=0,h=c.length;p<h;p++)i=Array(p+1).join("    "),s.push(i+c[p]+" {\n"),f.push(i+"}\n");for(var g in o)if(o.hasOwnProperty(g))for(var d=o[g],p=0,h=d.length;p<h;p++){var m=d[p];s.push(u+m[0]+": ",m[1]+";\n")}e.push(s.concat(f.reverse()).join(""))}for(var b=[],t=0,r=e.length;t<r;t++)b.push(e[t]);return b.join("")}function a(n){for(var e={atsign:null,open:{brace:null,comment:null},closed:{brace:null,comment:null},counter:{brace:null},child:{complex:null,simple:null}},t=0,l=n.length;t<l;t++){var a=n.charAt(t),c=a.charCodeAt(0);if(64===c){var o=n.indexOf(" ",t+1);if(-~["charset","import","namespace"].indexOf(n.substring(t+1,o)))t=n.indexOf(";",t+1)+1;else{e.open.brace=n.indexOf("{",t+1),e.atsign=t,e.counter.brace=1,t=e.open.brace;for(var u=n.substring(e.atsign,e.open.brace).trim(),s=[t],f=0;e.counter.brace;){var p=n.indexOf("{",t+1),h=n.indexOf("}",t+1),g=[-~p?p:null,-~h?h:null].filter(Number),d=g.length?Math.min.apply(null,g):null,m=s[s.length-1],b=n.substring(m+1,d).trim(),x=n.charAt(m),v=n.charAt(d),O="@"===b.charAt(0)?"x":"s";"{"===x&&"{"===v?"x"===O?(e.child.complex=!0,f++,u+=" / "+b):"s"===O&&(u=r(u,b)):"{"===x&&"}"===v?(i(u,b),"s"===O&&(u=r(u,""))):"}"===x&&"{"===v?"x"===O?(e.child.complex=!0,f++,u+=" / "+b):"s"===O&&(u=r(u,b)):"}"===x&&"}"===v&&(u=u.split(" / ").filter(function(n){return"@"===n.charAt(0)}),u.splice(-1,1),u=u.join(" / "),f--),s.push(d),p===d?e.counter.brace++:h===d&&e.counter.brace--,t=d,0===e.counter.brace&&(e.counter.brace=null)}e.atsign=null}}if(123===c){var h=n.lastIndexOf("}",t),A=n.lastIndexOf(";",t),w=[-~h?h:null,-~A?A:null].filter(Number),y=w.length?Math.max.apply(null,w):null,u=n.substring(y?y+1:0,t).trim();i(u,n.substring(t+1,n.indexOf("}",t+1)).trim())}}}var c=[],o={counter:-1,container:[],info:{content:{pattern:new RegExp(/(?!((\{|;)\s*?))content:(.*?)(?=;\s*(-|\w|\}))/,"gi")},entity:{pattern:new RegExp(/&#?x?([\da-f]|[a-z])+;/,"gi")},parens:{pattern:new RegExp(/\(([^()]*|\([^()]*\))*?\)/,"g")}}};self.addEventListener("message",function(e){var t=e.data;(({start:function(){a(n(t.string)),self.postMessage({action:"done",dupes:c,prettified:l(c)})},stop:function(){self.close()}})[t.action]||window.Function)()},!1)}()}();